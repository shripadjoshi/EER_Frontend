<div class="container">
	<h1>Departments</h1>
	<div ng-if="isMsg" class="alert alert-info">
	  <a href="javascript:void(0)" class="close" data-dismiss="alert" aria-label="close">&times;</a>
	  {{message}}
	</div>

	<div ng-if="isErr" class="alert alert-danger">
	  <a href="javascript:void(0)" class="close" data-dismiss="alert" aria-label="close">&times;</a>
	  {{errMessage}}
	</div>

	<a href="#/department/new">Create new department</a>
	<table id="departments" cellspacing="0" width="100%" datatable="ng" class="row-border hover">
		<thead>
		    <tr>
		      <th>Name</th>
		      <th>Purpose</th>
		      <th>Location</th>
		      <th>Company</th>	      	      
		      <th></th>
		    </tr>
	  	</thead>
	  	<!--<tfoot>
		    <tr>
		      <th>Name</th>
		      <th></th>
		    </tr>
	  	</tfoot>-->
		<tbody>
			<tr ng-repeat="department in departments" >
				<td>{{department.name | capitalize}}</td>
				<td>{{department.purpose}}</td>
				<td>{{department.location}}</td>
				<td>{{department.company.name}}</td>							
				<td>
				<a href="javascript:void(0)" class="btn btn-success" data-toggle="modal" data-target="#{{department.id}}" ng-disabled="department.designations.length <= 0">Associated designations</a>
					<a href="#/department/edit/{{department.id}}" class="btn btn-primary">Edit</a>
					<a href="javascript:void(0)" class="btn btn-danger" ng-click="deleteDepartment(department.id, department.name)">Delete</a>
				</td>
			</tr>			
		</tbody>
	</table>

		<!-- Modal window -->

	<div ng-repeat="department in departments" id="{{department.id}}" class="modal fade" role="dialog" ng-show="department.designations.length > 0">
	  <div class="modal-dialog">

	    <!-- Modal content-->
	    <div class="modal-content">
	      <div class="modal-header">
	        <button type="button" class="close" data-dismiss="modal">&times;</button>
	        <h4 class="modal-title"><b>{{department.name | capitalize}}</b> department details</h4>
	      </div>
	      <div class="modal-body">
	      	<table id="companiesModal" cellspacing="0" width="100%" class="row-border hover" border="1">
				<thead>
					<tr>
				      <th colspan="2"><center>Department details</center></th>		            
				    </tr>
				    <tr>
				      <th>Name:</th>
				      <td>{{department.name | capitalize}}</td>		      
				    </tr>
				    <tr>
				      <th>Associated designations:</th>
				      <td>{{department.designations | joinArrayValues}}</td>		      
				    </tr>
				    
			  	</thead>
				<!--<tbody>
						
				</tbody>-->
		 	</table>
	      </div>
	      <div class="modal-footer">
	        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
	      </div>
	    </div>

	  </div>
	</div>
</div>
